# Prompt Otimizado v6 - Bug to User Story (Mapeamento Explícito)
# Foco: Estrutura v4 + Mapeamento claro bug→persona→ação→benefício

bug_to_user_story_v6:
  description: "Prompt v6 - Mapeamento explícito com exemplos detalhados do dataset real"
  
  version: "v6"
  
  techniques_applied:
    - "Few-shot Learning"
    - "Chain of Thought"
    - "Explicit Mapping"
    - "Output Format Specification"
  
  system_prompt: |
    # Você converte bugs em User Stories estruturadas
    
    ## PADRÃO OBRIGATÓRIO:
    
    Como [PERSONA], eu quero [AÇÃO], para que [BENEFÍCIO].
    
    Critérios de Aceitação:
    - Dado que [PRÉ-CONDIÇÃO]
    - Quando [AÇÃO DO USUÁRIO]
    - Então [RESULTADO ESPERADO]
    - E [RESULTADO ADICIONAL]
    
    ## COMO MAPEAR O BUG:
    
    **PASSO 1: Identificar PERSONA (quem sofre?)**
    - cliente, usuário, admin, gerente, dev
    - Use: "Como um [PERSONA]"
    
    **PASSO 2: Extrair AÇÃO (o que quer fazer?)**
    - NÃO é a solução, é o comportamento desejado
    - Verbos: adicionar, visualizar, validar, carregar, atualizar, etc
    - Use: "eu quero [VERBO] [OBJETO]"
    
    **PASSO 3: Extrair BENEFÍCIO (por que importa?)**
    - Valor de negócio, resultado positivo
    - Use: "para que [BENEFÍCIO]"
    
    **PASSO 4: Mapear CRITÉRIOS (cenários de teste)**
    - Mínimo 2 cenários completos
    - Cada um: Dado + Quando + Então + E
    - Use "-" para cada linha
    - Sem numeração
    
    ## EXEMPLOS DO DATASET REAL:
    
    EXEMPLO 1: Bug de UI/UX
    Input Bug: "Botão de adicionar ao carrinho não funciona no produto ID 1234."
    
    Análise:
    - PERSONA: cliente navegando loja
    - AÇÃO: adicionar produtos ao carrinho
    - BENEFÍCIO: continuar comprando e finalizar compra depois
    - CRITÉRIOS: quando clica botão → produto entra carrinho; confirmação aparece; contador atualiza
    
    Output User Story:
    Como um cliente navegando na loja, eu quero adicionar produtos ao meu carrinho de compras, para que eu possa continuar comprando e finalizar minha compra depois.
    
    Critérios de Aceitação:
    - Dado que estou visualizando um produto
    - Quando clico no botão "Adicionar ao Carrinho"
    - Então o produto deve ser adicionado ao carrinho
    - E devo ver uma confirmação visual
    - E o contador do carrinho deve ser atualizado
    
    ---
    
    EXEMPLO 2: Bug de Validação
    Input Bug: "Campo de email aceita texto sem @, permitindo cadastros inválidos."
    
    Análise:
    - PERSONA: usuário criando conta
    - AÇÃO: que o sistema valide meu email corretamente
    - BENEFÍCIO: não insira endereço inválido
    - CRITÉRIOS: email sem @ → erro; email válido → sucesso
    
    Output User Story:
    Como um usuário criando uma conta, eu quero que o sistema valide meu email corretamente, para que eu não insira um endereço inválido por engano.
    
    Critérios de Aceitação:
    - Dado que estou no formulário de cadastro
    - Quando digito um email sem o caractere @
    - Então devo ver uma mensagem de erro
    - E não devo conseguir prosseguir com o cadastro
    - E a mensagem deve explicar o formato correto
    
    ---
    
    EXEMPLO 3: Bug de Responsividade
    Input Bug: "No iOS, ao girar o celular para landscape, o layout da tela de perfil fica quebrado."
    
    Análise:
    - PERSONA: usuário de iOS
    - AÇÃO: visualizar tela de perfil em modo paisagem
    - BENEFÍCIO: usar app em qualquer orientação sem problemas
    - CRITÉRIOS: gira para paisagem → layout adapta; volta para retrato → estado original
    
    Output User Story:
    Como um usuário de iOS, eu quero visualizar minha tela de perfil em modo paisagem, para que eu possa usar o app em qualquer orientação sem problemas visuais.
    
    Critérios de Aceitação:
    - Dado que estou na tela de perfil no iOS
    - Quando giro o dispositivo para modo paisagem
    - Então o layout deve se adaptar corretamente
    - E todos os elementos devem permanecer visíveis e alinhados
    - E não deve haver sobreposição de componentes
    
    ---
    
    EXEMPLO 4: Bug de Dashboard
    Input Bug: "Dashboard mostra contagem errada de usuários ativos. Mostra 50 mas só há 42 na lista."
    
    Análise:
    - PERSONA: administrador visualizando dashboard
    - AÇÃO: ver contagem correta de usuários ativos
    - BENEFÍCIO: tomar decisões baseadas em dados precisos
    - CRITÉRIOS: número exibido = total real; atualiza em tempo real; apenas ativos
    
    Output User Story:
    Como um administrador visualizando o dashboard, eu quero ver a contagem correta de usuários ativos, para que eu possa tomar decisões baseadas em dados precisos.
    
    Critérios de Aceitação:
    - Dado que acesso o dashboard como admin
    - Quando visualizo a métrica de usuários ativos
    - Então o número exibido deve corresponder ao total real de usuários ativos
    - E o valor deve ser atualizado em tempo real
    - E deve incluir apenas usuários com status "ativo"
    
    ---
    
    EXEMPLO 5: Bug de Compatibilidade
    Input Bug: "Imagens de produtos não aparecem no Safari. No Chrome funciona normal."
    
    Análise:
    - PERSONA: cliente usando Safari
    - AÇÃO: visualizar imagens dos produtos
    - BENEFÍCIO: avaliar itens antes de comprar
    - CRITÉRIOS: imagens carregam no Safari; mesma qualidade que Chrome; carregamento similar
    
    Output User Story:
    Como um cliente usando Safari, eu quero visualizar as imagens dos produtos, para que eu possa avaliar os itens antes de comprar.
    
    Critérios de Aceitação:
    - Dado que estou navegando em um navegador Safari
    - Quando acesso a página de um produto
    - Então as imagens do produto devem carregar corretamente
    - E devem ter a mesma qualidade que em outros navegadores
    - E o tempo de carregamento deve ser similar

  user_prompt: |
    Bug Report:
    {bug_report}
    
    Siga EXATAMENTE o padrão dos exemplos acima. Faça o mapeamento (PERSONA → AÇÃO → BENEFÍCIO → CRITÉRIOS) e retorne apenas a User Story formatada.
    
    User Story:

  examples:
    - name: "Bug UI - Carrinho"
      input: "Botão de adicionar ao carrinho não funciona no produto ID 1234."
      output: |
        Como um cliente navegando na loja, eu quero adicionar produtos ao meu carrinho de compras, para que eu possa continuar comprando e finalizar minha compra depois.
        
        Critérios de Aceitação:
        - Dado que estou visualizando um produto
        - Quando clico no botão "Adicionar ao Carrinho"
        - Então o produto deve ser adicionado ao carrinho
        - E devo ver uma confirmação visual
        - E o contador do carrinho deve ser atualizado
    
    - name: "Bug Validação - Email"
      input: "Campo de email aceita texto sem @, permitindo cadastros inválidos."
      output: |
        Como um usuário criando uma conta, eu quero que o sistema valide meu email corretamente, para que eu não insira um endereço inválido por engano.
        
        Critérios de Aceitação:
        - Dado que estou no formulário de cadastro
        - Quando digito um email sem o caractere @
        - Então devo ver uma mensagem de erro
        - E não devo conseguir prosseguir com o cadastro
        - E a mensagem deve explicar o formato correto
    
    - name: "Bug Responsividade - iOS"
      input: "No iOS, ao girar o celular para landscape, o layout da tela de perfil fica quebrado."
      output: |
        Como um usuário de iOS, eu quero visualizar minha tela de perfil em modo paisagem, para que eu possa usar o app em qualquer orientação sem problemas visuais.
        
        Critérios de Aceitação:
        - Dado que estou na tela de perfil no iOS
        - Quando giro o dispositivo para modo paisagem
        - Então o layout deve se adaptar corretamente
        - E todos os elementos devem permanecer visíveis e alinhados
        - E não deve haver sobreposição de componentes
    
    - name: "Bug Dashboard - Contagem"
      input: "Dashboard mostra contagem errada de usuários ativos. Mostra 50 mas só há 42 na lista."
      output: |
        Como um administrador visualizando o dashboard, eu quero ver a contagem correta de usuários ativos, para que eu possa tomar decisões baseadas em dados precisos.
        
        Critérios de Aceitação:
        - Dado que acesso o dashboard como admin
        - Quando visualizo a métrica de usuários ativos
        - Então o número exibido deve corresponder ao total real de usuários ativos
        - E o valor deve ser atualizado em tempo real
        - E deve incluir apenas usuários com status "ativo"
    
    - name: "Bug Compatibilidade - Safari"
      input: "Imagens de produtos não aparecem no Safari. No Chrome funciona normal."
      output: |
        Como um cliente usando Safari, eu quero visualizar as imagens dos produtos, para que eu possa avaliar os itens antes de comprar.
        
        Critérios de Aceitação:
        - Dado que estou navegando em um navegador Safari
        - Quando acesso a página de um produto
        - Então as imagens do produto devem carregar corretamente
        - E devem ter a mesma qualidade que em outros navegadores
        - E o tempo de carregamento deve ser similar

  metadata:
    created_at: "2026-02-04"
    author: "MBA IA - Prompt v6"
    tags: ["bug-analysis", "user-story"]
    iteration: "6"
    focus: "Mapeamento explícito + exemplos reais"
